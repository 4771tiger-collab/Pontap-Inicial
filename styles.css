:root{
  --bg:#fff; --fg:#0b1220; --muted:#5f6b86;
  --brand:#2f6fff; --brand-weak:#e8f0ff;
  --line:#e7eaf3; --card:#fff; --ok:#10b981; --warn:#ef4444;
  --shadow:0 6px 24px rgba(18,38,63,.06); --radius:14px;
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN","Noto Sans JP","Yu Gothic UI","Yu Gothic",Meiryo,sans-serif;
  color:var(--fg); background:var(--bg);
}
.link{color:var(--brand); text-decoration:none} .link:hover{text-decoration:underline}
.muted{color:var(--muted)}

.site-header{position:sticky; top:0; z-index:10; background:linear-gradient(180deg,#fff 60%,rgba(255,255,255,.85)); backdrop-filter:saturate(1.1) blur(6px); border-bottom:1px solid var(--line)}
.brand{padding:16px 20px}
.title{margin:0; font-size:20px; letter-spacing:.2px}
.subtitle{margin:6px 0 0; color:var(--muted); font-size:13px}


.day-nav{display:flex; gap:12px; align-items:center; padding:10px 20px; flex-wrap:wrap; border-top:1px solid var(--line)}
.select-wrap{display:flex; gap:8px; align-items:center}
.select-wrap select{padding:8px 10px; border:1px solid var(--line); border-radius:10px}
.theme{margin-left:auto; color:var(--muted); font-weight:600}

.toolbar{display:flex; gap:24px; padding:12px 20px; flex-wrap:wrap; align-items:center; border-top:1px solid var(--line)}
.toggles strong{margin-right:8px}
.toggles label{margin-right:12px; color:var(--muted)}

.quick{margin-left:auto}

.progress{display:flex; gap:12px; align-items:center; padding:12px 20px; border-top:1px solid var(--line)}
.progress-rail{flex:1; height:10px; background:#f2f5fb; border-radius:999px; overflow:hidden}
.progress-bar{height:100%; width:0%; background:linear-gradient(90deg,var(--brand),#00d4ff)}
.progress-text{min-width:90px; text-align:right; color:var(--muted); font-weight:600}

.items{max-width:980px; margin:16px auto; padding:0 16px 40px; display:grid; gap:12px}
.item{background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px; display:grid; gap:10px}
.item-head{display:flex; gap:10px; align-items:center; justify-content:space-between}
.badges{display:flex; gap:8px; align-items:center}
.badge{font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--line); color:var(--muted); background:#fff}
.controls{display:flex; gap:6px; flex-wrap:wrap}
.btn{padding:8px 12px; border-radius:12px; border:0; background:var(--brand); color:#fff; font-weight:700; box-shadow:var(--shadow); cursor:pointer; transition:transform .02s ease}
.btn:hover{transform:translateY(-1px)}
.btn:disabled{opacity:.5; cursor:not-allowed}
.ghost{background:transparent; color:var(--brand); border:1px solid var(--brand)}
.btn.light{background:var(--brand-weak); color:var(--brand)}
.btn.outline{background:#fff; color:var(--warn); border:1px solid var(--warn)}
.btn.icon{width:38px; height:38px; display:inline-grid; place-items:center; padding:0}
.btn.disabled{opacity:.5; pointer-events:none}

.item-body{display:grid; gap:8px}
.lines{display:grid; gap:6px}
.line{padding:8px 10px; border-radius:10px; background:#f8faff; border:1px dashed #e6edff}
.line.hint{background:#fafafa}
.kvs{display:flex; gap:8px; flex-wrap:wrap}
.kv{padding:4px 8px; border-radius:8px; background:#eef4ff; border:1px solid #dbe6ff; font-size:13px}

.item-foot{display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap}
.switches{display:flex; gap:10px; flex-wrap:wrap; color:var(--muted)}
.mastered{display:flex; gap:8px; align-items:center}
.mastered input{transform:scale(1.2)}
.hidden{display:none !important}
.warn-banner{background:#fff3f3; color:#b71c1c; border:1px solid #ffd1d1; padding:10px 12px; border-radius:10px; margin:12px 16px}

/* ホーム */
.home-main{max-width:980px; margin:20px auto 80px; padding:0 16px; display:grid; gap:16px}
.card{background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px}
.cta-row{display:flex; gap:12px; flex-wrap:wrap}

/* モーダル */
/* モーダル本体の z-index を十分大きくする */
#settingsModal {
  position: fixed;
  z-index: 1000; /* これを追加！ */
  top: 0; left: 0; width: 100vw; height: 100vh;
  /* ...既存のスタイル... */
}

.modal{position:fixed; inset:0; display:none}
.modal.open{display:block}
.modal__panel {
  position: absolute;
  z-index: 1001; /* これを追加！ backdropより高く */
  inset: auto;
  right: 16px;
  top: 16px;
  width: min(720px, calc(100% - 32px));
  background: #fff;
  border-radius: 16px;
  border: 1px solid var(--line);
  box-shadow: 0 10px 40px rgba(0,0,0,.2);
}
.modal__backdrop{
  z-index: 999; /* モーダル本体より少し小さく */
  position: fixed;
  top: 0; left: 0; width: 100vw; height: 100vh; background:rgba(11,18,32,.45);
}
.modal__head{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--line)}
.modal__body{padding:14px}
.settings-grid{display:grid; gap:12px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
.settings-grid select{width:100%; padding:8px 10px; border:1px solid var(--line); border-radius:10px}
.slider{display:flex; gap:8px; align-items:center}
.modal__actions{display:flex; gap:10px; margin-top:8px}

.site-footer{max-width:980px; margin:0 auto 80px; padding:0 16px; color:var(--muted)}
